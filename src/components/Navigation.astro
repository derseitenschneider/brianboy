---
/**
 * Navigation.astro
 *
 * Desktop navigation links with active state detection.
 */
import { getLangFromUrl, useTranslations, getLocalizedPath } from "../i18n/ui";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const currentPath = Astro.url.pathname;

const links = [
  { href: "", label: t("nav.home") },
  { href: "about", label: t("nav.about") },
];
---

<nav class="flex items-center gap-8" aria-label="Main navigation">
  {
    links.map(({ href, label }) => {
      const fullHref = getLocalizedPath(lang, href ? `/${href}` : "/");
      const isActive =
        currentPath === fullHref ||
        currentPath === `${fullHref}/` ||
        (fullHref !== "/" && currentPath.startsWith(fullHref));

      return (
        <a
          href={fullHref}
          class:list={[
            "text-sm tracking-wide uppercase transition-colors",
            isActive
              ? "text-accent-500 font-medium"
              : "text-ink-muted dark:text-warm-200/70 hover:text-ink dark:hover:text-warm-200",
          ]}
          aria-current={isActive ? "page" : undefined}
        >
          {label}
        </a>
      );
    })
  }
</nav>
