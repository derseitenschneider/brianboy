---
phase: 02-layout-design
plan: 02
type: execute
wave: 2
depends_on: ["02-01"]
files_modified:
  - src/components/Header.astro
  - src/components/Navigation.astro
  - src/components/MobileMenu.astro
  - src/layouts/BaseLayout.astro
  - src/i18n/ui.ts
autonomous: false

must_haves:
  truths:
    - "Header is sticky and visible at top when scrolling"
    - "Desktop navigation shows links side by side"
    - "Mobile menu hamburger appears below md breakpoint"
    - "Mobile menu opens and closes on button click"
    - "Footer sticks to bottom even with minimal content"
    - "Theme toggle and language switch remain in header"
  artifacts:
    - path: "src/components/Header.astro"
      provides: "Sticky header with navigation, theme toggle, language switch"
      min_lines: 30
    - path: "src/components/Navigation.astro"
      provides: "Desktop navigation links with active state"
      min_lines: 15
    - path: "src/components/MobileMenu.astro"
      provides: "Mobile hamburger menu with toggle functionality"
      min_lines: 40
    - path: "src/layouts/BaseLayout.astro"
      provides: "Flexbox sticky footer layout with Header and Footer"
      contains: "flex flex-col min-h-screen"
  key_links:
    - from: "src/layouts/BaseLayout.astro"
      to: "src/components/Header.astro"
      via: "component import"
      pattern: "import Header"
    - from: "src/layouts/BaseLayout.astro"
      to: "src/components/Footer.astro"
      via: "component import"
      pattern: "import Footer"
    - from: "src/components/Header.astro"
      to: "src/components/MobileMenu.astro"
      via: "component import"
      pattern: "import MobileMenu"
---

<objective>
Create Header with Navigation and MobileMenu, integrate into BaseLayout with sticky footer pattern.

Purpose: Complete the responsive layout structure with proper navigation on all screen sizes.
Output: Header.astro, Navigation.astro, MobileMenu.astro, updated BaseLayout.astro with sticky footer.
</objective>

<execution_context>
@/Users/brianboy/.claude/get-shit-done/workflows/execute-plan.md
@/Users/brianboy/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-layout-design/02-RESEARCH.md
@.planning/phases/02-layout-design/02-01-SUMMARY.md

@src/layouts/BaseLayout.astro
@src/components/ThemeToggle.astro
@src/components/LanguageSwitch.astro
@src/components/Footer.astro
@src/i18n/ui.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Navigation component with active state detection</name>
  <files>src/components/Navigation.astro</files>
  <action>
Create Navigation.astro following research Pattern (Responsive Navigation Links):

1. Import i18n helpers: getLangFromUrl, useTranslations, getLocalizedPath
2. Get current lang and translations
3. Get current path: `const currentPath = Astro.url.pathname;`
4. Define links array: `[{ href: "", label: t("nav.home") }, { href: "about", label: t("nav.about") }]`
5. Map over links to render anchor elements:
   - Use getLocalizedPath(lang, href) for href
   - Detect active state: compare currentPath with fullHref (handle trailing slash)
   - Active classes: `text-accent-500 dark:text-accent-400`
   - Inactive classes: `text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100`
   - Base classes: `text-sm font-medium transition-colors`
   - Add `aria-current="page"` when active
  </action>
  <verify>
`npm run build` passes without TypeScript errors.
Navigation.astro file exists with links array and active state detection.
  </verify>
  <done>
Navigation.astro renders desktop navigation links with proper active state styling.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Header and MobileMenu components</name>
  <files>src/components/Header.astro, src/components/MobileMenu.astro, src/i18n/ui.ts</files>
  <action>
1. Add nav.menu translation to ui.ts:
   - de: `"nav.menu": "Menu"`
   - en: `"nav.menu": "Menu"`

2. Create MobileMenu.astro following research Pattern 4:
   - Import i18n helpers
   - Wrapper div with `class="md:hidden"` (only shows on mobile)
   - Button with id="mobile-menu-button", aria-expanded="false", aria-controls="mobile-menu"
   - Button classes: `p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors`
   - Two SVG icons: hamburger (id="menu-icon-open") and X (id="menu-icon-close", class="hidden")
   - Nav element with id="mobile-menu", class="hidden absolute top-full left-0 right-0 z-50 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800 shadow-lg"
   - Inside nav: links for Home and About using getLocalizedPath
   - Script tag (NOT is:inline - let Astro process it) with:
     - Query button, menu, icons
     - Click handler toggles aria-expanded, menu.hidden, icon visibility
     - Document click handler closes menu when clicking outside

3. Create Header.astro following research Pattern 2:
   - Import Navigation, MobileMenu, ThemeToggle, LanguageSwitch
   - Import i18n helpers for lang detection
   - Header classes: `sticky top-0 z-40 w-full bg-white/95 dark:bg-gray-900/95 backdrop-blur-sm border-b border-gray-200 dark:border-gray-800`
   - Container: `max-w-7xl mx-auto px-4 sm:px-6 lg:px-8`
   - Inner flex: `flex items-center justify-between h-16`
   - Left: Logo/name link `<a href="/" class="font-semibold text-lg">Brian</a>`
   - Center: Desktop nav with `class="hidden md:flex items-center gap-6"` containing Navigation component
   - Right: div with `class="flex items-center gap-2"` containing LanguageSwitch, ThemeToggle, MobileMenu
  </action>
  <verify>
`npm run build` passes.
Header.astro imports all required components.
MobileMenu.astro has script for toggle functionality.
ui.ts has nav.menu translation.
  </verify>
  <done>
Header.astro is sticky with backdrop blur, shows Navigation on desktop, MobileMenu on mobile.
MobileMenu.astro has functional hamburger toggle with ARIA attributes.
  </done>
</task>

<task type="auto">
  <name>Task 3: Update BaseLayout with sticky footer pattern</name>
  <files>src/layouts/BaseLayout.astro</files>
  <action>
Update BaseLayout.astro to use the sticky footer pattern from research Pattern 3:

1. Add imports for Header and Footer components
2. Remove the existing simple header element (the one with just ThemeToggle and LanguageSwitch)
3. Update body classes to: `flex flex-col min-h-screen bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-sans`
   - Note: Remove `transition-colors duration-200` from body (theme transition is on html element in global.css)
4. Structure body content as:
   - Header component
   - main element with `class="flex-1"` containing the slot
   - Footer component
5. Keep all head content (meta, title, ThemeScript) unchanged
  </action>
  <verify>
`npm run dev` - site loads without errors.
Page has sticky header at top.
Footer stays at bottom even with minimal content.
Mobile hamburger menu appears below md breakpoint.
Desktop nav appears at md breakpoint and above.
  </verify>
  <done>
BaseLayout uses flex column layout with Header, flex-1 main, and Footer.
Footer sticks to bottom of viewport with minimal content.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete responsive layout with sticky header, mobile menu, and sticky footer</what-built>
  <how-to-verify>
1. Run `npm run dev` and open http://localhost:4321
2. Verify desktop (>768px):
   - Header is sticky when scrolling (stays at top)
   - Navigation links (Home, About) visible in header
   - Theme toggle and language switch in header
   - Footer at bottom with Home/About links and copyright
3. Verify mobile (<768px):
   - Hamburger icon visible in header
   - Click hamburger - menu opens with Home/About links
   - Click hamburger again or outside - menu closes
   - Desktop nav links hidden
4. Verify responsive:
   - Resize browser from mobile to desktop - layout transitions smoothly
5. Verify dark mode:
   - Toggle theme - header and footer adapt colors correctly
6. Verify i18n:
   - Click language switch - footer text changes language
  </how-to-verify>
  <resume-signal>Type "approved" if layout works correctly, or describe any issues</resume-signal>
</task>

</tasks>

<verification>
1. `npm run build` completes successfully
2. Header is sticky with backdrop blur
3. Navigation shows active state on current page
4. MobileMenu toggles correctly with ARIA updates
5. Footer sticks to bottom with minimal content
6. All components respect dark mode
7. All text uses i18n translations
</verification>

<success_criteria>
- Site renders correctly on mobile (375px), tablet (768px), and desktop (1280px)
- Header with navigation, theme toggle, and language switcher visible on all pages
- Footer with secondary navigation visible on all pages
- Mobile navigation works via hamburger menu
- Layout uses proper semantic HTML
</success_criteria>

<output>
After completion, create `.planning/phases/02-layout-design/02-02-SUMMARY.md`
</output>
