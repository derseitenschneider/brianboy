---
phase: 04-seo-deployment
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/layouts/BaseLayout.astro
  - src/i18n/ui.ts
  - src/components/Hero.astro
  - src/pages/index.astro
  - src/pages/about.astro
  - src/pages/en/index.astro
  - src/pages/en/about.astro
  - public/og-image.jpg
autonomous: true
requirements:
  - REQ-013
  - REQ-T08

must_haves:
  truths:
    - "Each page has a unique meta title and description in both languages"
    - "OpenGraph tags render with correct title, description, image, and locale per page"
    - "Canonical URL points to current page's absolute URL"
    - "hreflang tags link German and English versions of each page, with x-default pointing to German"
    - "JSON-LD Person schema is present with correct name, jobTitle, worksFor, and sameAs"
    - "Identity strings say 'Software Developer & Musician' not 'Tech Entrepreneur'"
    - "Twitter Card meta tags are present for social sharing"
  artifacts:
    - path: "src/layouts/BaseLayout.astro"
      provides: "Complete SEO head with OG, hreflang, canonical, JSON-LD"
      contains: "og:title"
    - path: "public/og-image.jpg"
      provides: "Static OG image for social sharing previews"
    - path: "src/i18n/ui.ts"
      provides: "Updated identity strings and per-page SEO metadata"
      contains: "Software Developer"
  key_links:
    - from: "src/layouts/BaseLayout.astro"
      to: "src/i18n/ui.ts"
      via: "Translation strings for meta descriptions"
      pattern: "useTranslations.*description"
    - from: "src/layouts/BaseLayout.astro"
      to: "public/og-image.jpg"
      via: "Absolute URL reference in og:image meta tag"
      pattern: "og-image\\.jpg"
    - from: "src/pages/*.astro"
      to: "src/layouts/BaseLayout.astro"
      via: "title and description props"
      pattern: "BaseLayout.*title=.*description="
---

<objective>
Add complete SEO metadata to all pages: OpenGraph tags, Twitter Cards, canonical URLs, hreflang alternate links, JSON-LD Person structured data, and OG image. Update identity strings from "Tech Entrepreneur" to "Software Developer & Musician" across the site.

Purpose: Search engines and social platforms correctly index and preview the site; identity is consistent everywhere.
Output: Fully SEO-optimized `<head>` in BaseLayout, unique titles/descriptions per page, static OG image.
</objective>

<execution_context>
@/Users/brianboy/.claude/get-shit-done/workflows/execute-plan.md
@/Users/brianboy/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-seo-deployment/04-RESEARCH.md
@src/layouts/BaseLayout.astro
@src/i18n/ui.ts
@src/components/Hero.astro
@src/pages/index.astro
@src/pages/about.astro
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update identity strings and add per-page SEO translation keys</name>
  <files>src/i18n/ui.ts, src/components/Hero.astro</files>
  <action>
In src/i18n/ui.ts:
1. Change `"site.description"` DE from "Tech-Unternehmer und Musiker" to "Software Developer & Musiker aus der Schweiz. Mitinhaber von morntag, Gruender von Eleno."
2. Change `"site.description"` EN from "Tech entrepreneur and musician" to "Software Developer & Musician from Switzerland. Co-owner of morntag, founder of Eleno."
3. Change `"hero.tagline"` DE from "Tech-Unternehmer & Musiker" to "Software Developer & Musiker"
4. Change `"hero.tagline"` EN from "Tech Entrepreneur & Musician" to "Software Developer & Musician"
5. Update `"hero.intro"` DE: replace "Tech-Unternehmer und Musiker" with "Software Developer und Musiker"
6. Update `"hero.intro"` EN: replace "Tech entrepreneur and musician" with "Software developer and musician"
7. Add new keys for homepage SEO titles:
   - `"seo.home.title"` DE: "Brian Boy | Software Developer & Musiker"
   - `"seo.home.title"` EN: "Brian Boy | Software Developer & Musician"
8. Add new keys for about page SEO titles:
   - `"seo.about.title"` DE: "Uber mich — Brian Boy | Software Developer & Musiker"
   - `"seo.about.title"` EN: "About — Brian Boy | Software Developer & Musician"
9. Add new keys for about page meta descriptions:
   - `"seo.about.description"` DE: "Vom Musiker zum Software Developer — die Geschichte hinter morntag, Eleno und pressdify."
   - `"seo.about.description"` EN: "From musician to software developer — the story behind morntag, Eleno, and pressdify."

In src/components/Hero.astro:
1. Replace the hardcoded tagline strings on line 20:
   - Change `"Tech-Unternehmer & Musiker"` to `t("hero.tagline")` for DE
   - Change `"Tech Entrepreneur & Musician"` to use the same `t("hero.tagline")` call
   - The current ternary `{lang === "de" ? "Tech-Unternehmer & Musiker" : "Tech Entrepreneur & Musician"}` should become `{t("hero.tagline")}`

Verify no remaining occurrences of "Tech-Unternehmer", "Tech Entrepreneur", or "Tech entrepreneur" exist in `src/` by searching the codebase. The only place "Tech" should appear is in the about page narrative translations (about.p2 mentions "Tech" in context of the story — that is fine, leave it).
  </action>
  <verify>Run `grep -r "Tech-Unternehmer\|Tech Entrepreneur\|Tech entrepreneur" src/ --include="*.astro" --include="*.ts"` — should return zero results (about.p narrative mentions are excluded since they don't use that exact phrase). Run `npm run build` to confirm no type errors.</verify>
  <done>All identity strings updated to "Software Developer & Musician" / "Software Developer & Musiker". Per-page SEO title and description keys exist in both languages. Hero component uses translation key instead of hardcoded strings.</done>
</task>

<task type="auto">
  <name>Task 2: Add OG image, extend BaseLayout head with full SEO tags, update page props</name>
  <files>src/layouts/BaseLayout.astro, public/og-image.jpg, src/pages/index.astro, src/pages/about.astro, src/pages/en/index.astro, src/pages/en/about.astro</files>
  <action>
**OG Image:**
Copy `src/assets/images/headshot.jpg` to `public/og-image.jpg` as a static file. Use `cp` command. This ensures a stable absolute URL at https://brianboy.ch/og-image.jpg that social crawlers can access without build hashes.

**BaseLayout.astro — extend Props and frontmatter:**

Update the Props interface to:
```typescript
interface Props {
  title: string;
  description: string;  // Make required (remove ?)
}
```

Add these computed values in the frontmatter:
```typescript
import { getLangFromUrl, getLocalizedPath } from "../i18n/ui";

const lang = getLangFromUrl(Astro.url);
const currentPath = Astro.url.pathname;
const alternateLang = lang === "de" ? "en" : "de";
const canonicalUrl = new URL(currentPath, Astro.site).href;
const alternateUrl = new URL(getLocalizedPath(alternateLang, currentPath), Astro.site).href;
const deUrl = lang === "de" ? canonicalUrl : alternateUrl;
const enUrl = lang === "en" ? canonicalUrl : alternateUrl;
const ogImageUrl = new URL("/og-image.jpg", Astro.site).href;

const personSchema = {
  "@context": "https://schema.org",
  "@type": "Person",
  "name": "Brian Boy",
  "url": "https://brianboy.ch",
  "image": ogImageUrl,
  "jobTitle": "Software Developer & Musician",
  "worksFor": [
    { "@type": "Organization", "name": "morntag", "url": "https://morntag.com" },
    { "@type": "Organization", "name": "Eleno", "url": "https://eleno.net" }
  ],
  "sameAs": [
    "https://github.com/brianboy",
    "https://linkedin.com/in/brianboy",
    "https://x.com/brianboy",
    "https://instagram.com/brianboy"
  ]
};
```

Note: Social profile URLs are placeholders. User will update with actual URLs before deployment.

**BaseLayout.astro — update `<head>` section:**

Replace the current head content (between `<head>` and `</head>`) with:
```html
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />

<!-- Primary Meta -->
<title>{title}</title>
<meta name="description" content={description} />

<!-- Canonical & Hreflang -->
<link rel="canonical" href={canonicalUrl} />
<link rel="alternate" hreflang="de" href={deUrl} />
<link rel="alternate" hreflang="en" href={enUrl} />
<link rel="alternate" hreflang="x-default" href={deUrl} />

<!-- OpenGraph -->
<meta property="og:title" content={title} />
<meta property="og:description" content={description} />
<meta property="og:type" content="website" />
<meta property="og:url" content={canonicalUrl} />
<meta property="og:image" content={ogImageUrl} />
<meta property="og:site_name" content="Brian Boy" />
<meta property="og:locale" content={lang === "de" ? "de_CH" : "en"} />

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content={title} />
<meta name="twitter:description" content={description} />
<meta name="twitter:image" content={ogImageUrl} />

<!-- JSON-LD Person -->
<script type="application/ld+json" set:html={JSON.stringify(personSchema)} />

<!-- Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300..700;1,9..40,300..700&family=Fraunces:ital,opsz,wght@0,9..144,300..900;1,9..144,300..900&display=swap" rel="stylesheet" />

<ThemeScript />
```

Keep the existing `<body>` unchanged.

**Update page files to use SEO-specific titles and descriptions:**

In `src/pages/index.astro` and `src/pages/en/index.astro`:
- Change `title={t("site.title")}` to `title={t("seo.home.title")}`
- Change `description={t("site.description")}` to keep `description={t("site.description")}` (the updated site.description now focuses on identity)

In `src/pages/about.astro` and `src/pages/en/about.astro`:
- Change `title={\`${t("about.title")} — Brian Boy\`}` to `title={t("seo.about.title")}`
- Change `description={t("about.meta")}` to `description={t("seo.about.description")}`
  </action>
  <verify>Run `npm run build`. Check `dist/index.html` contains: og:title, og:description, og:image, canonical, hreflang tags, and JSON-LD script. Check `dist/en/index.html` has different canonical URL and correct hreflang. Check `dist/about/index.html` has unique title and description different from homepage. Verify `dist/og-image.jpg` exists (copied from public/).</verify>
  <done>Every page has unique meta title and description. OpenGraph and Twitter Card tags render on all pages. Canonical URLs are absolute. Hreflang tags correctly link DE and EN versions with x-default pointing to German. JSON-LD Person schema is present. OG image is available at /og-image.jpg.</done>
</task>

</tasks>

<verification>
1. `npm run build` succeeds without errors
2. `grep -c "og:title" dist/index.html` returns 1
3. `grep -c "hreflang" dist/index.html` returns 3 (de, en, x-default)
4. `grep -c "application/ld+json" dist/index.html` returns 1
5. `grep "canonical" dist/index.html` shows https://brianboy.ch/
6. `grep "canonical" dist/en/index.html` shows https://brianboy.ch/en/
7. `grep "og:title" dist/index.html` shows "Brian Boy | Software Developer & Musiker"
8. `grep "og:title" dist/en/index.html` shows "Brian Boy | Software Developer & Musician"
9. No occurrences of "Tech Entrepreneur" or "Tech-Unternehmer" in dist/ (except narrative about.p2 context)
10. `dist/og-image.jpg` exists
</verification>

<success_criteria>
- Build passes with zero errors
- Each of the 4 pages has unique title and description
- OpenGraph, Twitter Card, canonical, and hreflang tags present on every page
- JSON-LD Person schema validates (check script tag content)
- Identity consistently says "Software Developer" across SEO metadata, hero, and structured data
- OG image accessible at /og-image.jpg
</success_criteria>

<output>
After completion, create `.planning/phases/04-seo-deployment/04-01-SUMMARY.md`
</output>
